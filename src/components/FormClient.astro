---
import { Client } from "astro:db";
import { db } from "astro:db";

if(Astro.request.method === "POST"){
const formData = await Astro.request.formData();
const name = formData.get("name");
const subname = formData.get("subname");
const cuit = formData.get("cuit");
const location = formData.get("location");
const phone = formData.get("phone");

if(typeof name === "string" &&
typeof subname === "string" &&
typeof cuit === "number" &&
typeof location === "string" &&
typeof phone === "number"
)
{
await db.insert(Client).values({name,subname,cuit,location,phone});
}
}
---

<section>
    <div class="bg-white p-8 rounded-lg w-2/4 mx-auto">
        <h2 class="text-xl font-bold mb-4">Agregar cliente</h2>
        <form id="form-agregar-cliente" method="post">
            <div class="mb-4">
                <label for="nombre" class="block font-bold mb-2">Nombre:</label>
                <input type="text" id="nombre" name="name" class="px-4 py-2 border rounded-lg w-full">
                <label for="Apellido" class="block font-bold mb-2">Apellido:</label>
                <input type="text" id="Apellido" name="subname" class="px-4 py-2 border rounded-lg w-full">
                <label for="cuit" class="block font-bold mb-2">Cuit:</label>
                <input type="number" id="cuit" name="cuit" class="px-4 py-2 border rounded-lg w-full">
                <label for="localidad" class="block font-bold mb-2">Localidad:</label>
                <input type="text" id="localidad" name="location" class="px-4 py-2 border rounded-lg w-full">
                <label for="telefono" class="block font-bold mb-2">Telefono:</label>
                <input type="number" id="telefono" name="phone" class="px-4 py-2 border rounded-lg w-full">
            </div>
            <button type="submit" id="btn-guardar-cliente"
                class="px-4 py-2 bg-blue-500 text-white rounded-lg mt-4">Guardar</button>
            <a href="/Create-client" class="px-4 py-2 bg-red-600 text-white rounded-lg mt-4">Cancelar</a>
        </form>

    </div>
</section>